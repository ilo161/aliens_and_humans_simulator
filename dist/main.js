!function(e){var n={};function r(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)r.d(t,a,function(n){return e[n]}.bind(null,a));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/dist/",r(r.s=0)}([function(e,n,r){"use strict";r.r(n);var t=function(e){return"./dist/".concat(e)};function a(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var o=function(){function e(n,r,t,a,o,i){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=n,this.startX=r,this.startY=t,this.points=30,this.color=a,this.value=i,this.orientation=o,this.blankSprite=void 0,this.colorSprite=void 0,this.loadSrc(o)}var n,r,o;return n=e,(r=[{key:"loadSrc",value:function(e){if("blank"===this.color){var n=this.orientationAndCreate(e);this.blankSprite=new Image,this.blankSprite.src=n;var r=this;this.blankSprite.onload=function(e){r.context.drawImage(r.blankSprite,r.startX,r.startY,100,378)}}else{var t=this.selectColor(this.color,e,this.value);this.colorSprite=new Image,this.colorSprite.src=t;var a=this;this.colorSprite.onload=function(e){a.context.drawImage(a.colorSprite,a.startX,a.startY,100,400)}}}},{key:"orientationAndCreate",value:function(e){return"h"===e||"H"===e?t("images/H_BarBackground.png"):"v"===e||"V"===e?t("images/V_BarBackground.png"):void 0}},{key:"selectColor",value:function(e,n,r){var a={blank:t("images/H_BarBackground.png"),blue:t("images/H_BlueBar.png"),green:t("images/H_GreenBar.png"),red:t("images/H_RedBar.png"),yellow:t("images/H_YellowBar.png")},o={blank:t("images/V_BarBackground.png"),blue:{10:t("images/V_BlueBar10.png"),20:t("images/V_BlueBar20.png"),30:t("images/V_BlueBar30.png"),40:t("images/V_BlueBar40.png"),50:t("images/V_BlueBar50.png"),60:t("images/V_BlueBar60.png"),70:t("images/V_BlueBar70.png"),80:t("images/V_BlueBar80.png"),90:t("images/V_BlueBar90.png"),100:t("images/V_BlueBar100.png")},green:{10:t("images/V_GreenBar10.png"),20:t("images/V_GreenBar20.png"),30:t("images/V_GreenBar30.png"),40:t("images/V_GreenBar40.png"),50:t("images/V_GreenBar50.png"),60:t("images/V_GreenBar60.png"),70:t("images/V_GreenBar70.png"),80:t("images/V_GreenBar80.png"),90:t("images/V_GreenBar90.png"),100:t("images/V_GreenBar100.png")}};return"h"===n||"H"===n?a[e]:"v"===n||"V"===n?o[e][r]:void 0}},{key:"increaseFill",value:function(e){this.value=e;var n=this.selectColor(this.color,this.orientation,this.value);this.colorSprite.src=n;var r=this;this.colorSprite.onload=function(e){r.context.drawImage(r.colorSprite,r.startX,r.startY,100,400)}}},{key:"decreaseFill",value:function(e){}},{key:"resetFill",value:function(){}},{key:"drawBar",value:function(e){e.drawImage(this.blankSprite,this.startX,this.startY,100,100)}}])&&a(n.prototype,r),o&&a(n,o),e}(),i={community:0,production:0,resources:0},s=function(e){i.resources+=e},l=function(e){var n=e.canvas.width/2-102;e.clearRect(n,478,n+350,30),e.font="bold 30px Sans-Serif",e.fillStyle="#66A1E7",e.strokeStyle="#55906F",e.fillText("Resources: "+i.resources,n,500),e.strokeText("Resources: "+i.resources,n,500)},c="images/00red_pyramid.png",u="images/01golden_pyramid.png",d="images/02light_pyramid.png",g="images/00shack.png",p="images/01butcher.png",m="images/02house.png";function f(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],t=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(t=(i=s.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(e){a=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return v(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}console.log("hello from canvas events");var h=void 0,y=new Image;y.src=t("images/grass_mix_d.jpg");var b=function(){for(var e={},n=0;n<4;n++){e[n]={};for(var r=0;r<7;r++)e[n][r]={isPresent:!1,cORp:"",klass:"",level:null}}return e}();var k={community:{parks:[],pyramids:[{file:t(c),name:"redPyramid",boost:10,cORp:"community",klass:"pyramids",index:0},{file:t(u),name:"goldenPyramid",boost:20,cORp:"community",klass:"pyramids",index:1},{file:t(d),name:"lightPyramid",boost:30,cORp:"community",klass:"pyramids",index:2}],ruins:[{}],meditationCircles:[],trees:[]},production:{farms:[],buildings:[],houses:[{file:t(g),name:"shack",boost:15,cORp:"production",klass:"houses",index:0},{file:t(p),name:"better",boost:25,cORp:"production",klass:"houses",index:1},{file:t(m),name:"home",boost:35,cORp:"production",klass:"houses",index:2}],energy:{wind:[],solar:[],hydro:[]}}},B=function(e,n){var r=document.getElementsByClassName("drop-down-container")[0],t=document.getElementsByClassName("civilization-menu")[0],a=document.getElementsByClassName("playerAlert")[0];e.addEventListener("mousedown",(function(e){if((h=d(e))&&Array.from(r.classList).includes("hidden")){r.classList.toggle("hidden");var n=t.options.length;t.setAttribute("size",n)}else void 0!==h||Array.from(r.classList).includes("hidden")||r.classList.toggle("hidden");console.log("currentGrid: ".concat(h))})),t.addEventListener("change",(function(){if(console.log("resources",i.resources),c(),i.resources<20)return a.appendChild(u("Every building costs 20 resources ... !")),t.selectedIndex=null,!1;var e=t.options[t.selectedIndex].value;if(console.log(b[h[0]][h[1]]),!l(e))return!1;var r=_(e),d=r.file;if(w()){if(w()){var g=h[0],p=h[1],m=b[g][p];r.index===m.level+1&&(console.log("DRAW!!!"),O(y,n,g,p,!0),I(n,d,h),S(r),console.log("PAY UP"),s(-20),i[r.cORp]+=r.boost)}}else!0===x(r)?(I(n,d,h),S(r),console.log("PAY UP"),s(-20),i[r.cORp]+=r.boost,function(e,n){var r,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"community";switch(!0){case e<=42:r=10;break;case e>42&&e<=84:r=20;break;case e>84&&e<=126:r=30;break;case e>126&&e<=168:r=40;break;case e>168&&e<=210:r=50;break;case e>210&&e<=252:r=60;break;case e>252&&e<=294:r=70;break;case e>294&&e<=336:r=80;break;case e>336&&e<=378:r=90;break;case e>378:r=100}if("community"===t)new o(n,-34,105,"green","v",r);else new o(n,590,105,"blue","v",r)}(i[r.cORp],n,r.cORp)):a.appendChild(u("That building is not the first of it's kind!"));t.selectedIndex=null,console.log(i)}));var l=function(e){var n=h[0],r=h[1];if(!0===b[n][r].isPresent){var t,o,i,s=e.split(","),l=f(s,3);t=l[0],o=l[1],l[2],i=parseInt(s[2]);var c=b[n][r],d=k[t][o].length-1;if(console.log(d),c.cORp!==t||c.klass!==o)return a.appendChild(u("Building types must match!")),!1;if(o===c.klass&&i===c.level&&d!=i)return a.appendChild(u("That building is already there. Try upgrading!")),!1;if(o===c.klass){if(d===c.level)return a.appendChild(u("Max upgrade achieved!")),!1;if(i<c.level)return a.appendChild(u("Try upgrading, we must not regret our past decisions")),!1}}return!0},c=function(){a.childElementCount>0&&a.removeChild(a.childNodes[0])},u=function(e){var n=document.createElement("p"),r=document.createTextNode(e);return n.appendChild(r),n.setAttribute("class","playerAlert"),n},d=function(n){var r,t,a=e.getBoundingClientRect(),o=n.pageX,i=n.pageY;r=o-a.left,t=i-a.top,console.log(a),console.log("-------"),console.log(r),console.log(t);var s=Math.floor((r-22)/86),l=Math.floor((t-131)/86);return console.log("X: [".concat(l,", Y: ").concat(s,"]")),l>=0&&l<=3&&s>=0&&s<=6?[l,s]:void 0}},_=function(e){var n,r,t,a=f(e.split(","),3);return n=a[0],r=a[1],t=a[2],console.log("--"),k[n][r][t]},w=function(){var e=h[0],n=h[1];return b[e][n].isPresent},S=function(e){var n=h[0],r=h[1];return b[n][r].isPresent=!0,b[n][r].cORp=e.cORp,b[n][r].klass=e.klass,b[n][r].level=e.index,b[n][r]},x=function(e){return 0===e.index},I=function(e,n,r){var t=new Image;t.src=n;var a=r[0],o=r[1];t.onload=function(){O(t,e,a,o)}},O=function(e,n,r,t,a){console.log("draw on grid");0===r&&0===t?a?(n.clearRect(22,131,86,86),n.drawImage(e,22,131,86,86)):n.drawImage(e,22,131,86,86):0===r&&t>0?a?(n.clearRect(86*t+22,86*r+131,86,86),n.drawImage(e,86*t+22,86*r+131,86,86)):n.drawImage(e,86*t+22,131,86,86):a?(n.clearRect(86*t+22,86*r+131,86,86),n.drawImage(e,86*t+22,86*r+131,86,86)):n.drawImage(e,86*t+22,86*r+131,86,86)};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas-home"),n=e.getContext("2d");B(e,n),function(e){var n=new Image;n.src=t("images/grass_mix_d.jpg"),n.onload=function(){r(e,n,22,131),r(e,n,22,217),r(e,n,22,303),r(e,n,22,389)};var r=function(e,n,r,t){for(var a=0;a<7;a++)e.drawImage(n,r,t,86,86),r+=86}}(n);new o(n,-34,115,"blank","v"),new o(n,590,115,"blank","v"),setInterval((function(){i.resources+=5,l(n)}),600);setInterval((function(){l(n)}),250)}))}]);
//# sourceMappingURL=main.js.map