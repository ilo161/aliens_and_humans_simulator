!function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/dist/",t(t.s=0)}([function(e,n,t){"use strict";t.r(n);var i=function(e){return"./dist/".concat(e)};function a(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(n,t,i,a,r,o){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=n,this.xStart=i,this.yStart=a,this.sprite=void 0,this.scaleW=r,this.scaleH=o,this.filePath=t,this.movements=[],this.moveIdx=0,this.loadAlienShip=this.loadAlienShip.bind(this),this.lToRAnimate=this.lToRAnimate.bind(this),this.drawShip=this.drawShip.bind(this),this.loadAlienShip(),this.moveSpanX()}var n,t,i;return n=e,(t=[{key:"moveSpanX",value:function(){for(var e=1;e<23;e++)this.movements.push({x:this.xStart*(40*e),y:this.yStart})}},{key:"loadAlienShip",value:function(){var e=this.filePath;this.sprite=new Image,this.sprite.src=e}},{key:"drawShip",value:function(){this.context.drawImage(this.sprite,this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.scaleW,this.scaleH)}},{key:"lToRAnimate",value:function(){this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.moveIdx,this.context.drawImage(this.sprite,this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.scaleW,this.scaleH),this.moveIdx++,this.moveIdx>=this.movements.length&&(this.moveIdx=0)}}])&&a(n.prototype,t),i&&a(n,i),e}();function o(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=n,this.army=[]}var n,t,a;return n=e,(t=[{key:"makeShips",value:function(){for(var e=this.army.length,n=[i("images/08-Netuno.png"),i("images/06-Saturno.png"),i("images/09-Pluto.png")];this.army.length<3;){var t=void 0;t=0===(e=this.army.length)?e:40*e;var a=n[e],o=new r(this.context,a,1,t,40,40);this.army.push(o)}}}])&&o(n.prototype,t),a&&o(n,a),e}();function l(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(n,t,i,a,r,o){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=n,this.startX=t,this.startY=i,this.points=30,this.color=a,this.value=o,this.orientation=r,this.blankSprite=void 0,this.colorSprite=void 0,this.loadSrc(r)}var n,t,a;return n=e,(t=[{key:"loadSrc",value:function(e){if("blank"===this.color){var n=this.orientationAndCreate(e);this.blankSprite=new Image,this.blankSprite.src=n;var t=this;this.blankSprite.onload=function(e){t.context.drawImage(t.blankSprite,t.startX,t.startY,100,378)}}else{var i=this.selectColor(this.color,e,this.value);this.colorSprite=new Image,this.colorSprite.src=i;var a=this;this.colorSprite.onload=function(e){a.context.drawImage(a.colorSprite,a.startX,a.startY,100,400)}}}},{key:"orientationAndCreate",value:function(e){return"h"===e||"H"===e?i("images/H_BarBackground.png"):"v"===e||"V"===e?i("images/V_BarBackground.png"):void 0}},{key:"selectColor",value:function(e,n,t){var a={blank:i("images/H_BarBackground.png"),blue:i("images/H_BlueBar.png"),green:i("images/H_GreenBar.png"),red:i("images/H_RedBar.png"),yellow:i("images/H_YellowBar.png")},r={blank:i("images/V_BarBackground.png"),blue:{10:i("images/V_BlueBar10.png"),20:i("images/V_BlueBar20.png"),30:i("images/V_BlueBar30.png"),40:i("images/V_BlueBar40.png"),50:i("images/V_BlueBar50.png"),60:i("images/V_BlueBar60.png"),70:i("images/V_BlueBar70.png"),80:i("images/V_BlueBar80.png"),90:i("images/V_BlueBar90.png"),100:i("images/V_BlueBar100.png")},green:{10:i("images/V_GreenBar10.png"),20:i("images/V_GreenBar20.png"),30:i("images/V_GreenBar30.png"),40:i("images/V_GreenBar40.png"),50:i("images/V_GreenBar50.png"),60:i("images/V_GreenBar60.png"),70:i("images/V_GreenBar70.png"),80:i("images/V_GreenBar80.png"),90:i("images/V_GreenBar90.png"),100:i("images/V_GreenBar100.png")}};return"h"===n||"H"===n?a[e]:"v"===n||"V"===n?r[e][t]:void 0}},{key:"increaseFill",value:function(e){this.value=e;var n=this.selectColor(this.color,this.orientation,this.value);this.colorSprite.src=n;var t=this;this.colorSprite.onload=function(e){t.context.drawImage(t.colorSprite,t.startX,t.startY,100,400)}}},{key:"decreaseFill",value:function(e){}},{key:"resetFill",value:function(){}},{key:"drawBar",value:function(e){e.drawImage(this.blankSprite,this.startX,this.startY,100,100)}}])&&l(n.prototype,t),a&&l(n,a),e}(),u={community:0,production:0,resources:0,alienTimer:2},d=function(e){u.resources+=e},m=function(e){var n=e.canvas.width/2-108;e.clearRect(n,500,n+350,30),e.font="bold 30px Sans-Serif",e.fillStyle="#000",e.strokeStyle="#FFF",e.fillText("Resources: "+u.resources,n,522),e.strokeText("Resources: "+u.resources,n,522)},p="images/00fountain.png",g="images/00plain_meditation.png",f="images/01activated_meditation.png",h="images/02light_meditation.png",v="images/00red_pyramid.png",y="images/01golden_pyramid.png",b="images/02light_pyramid.png",k="images/00small_tree.png",x="images/01mighty_tree.png",w="images/02tree_of_light.png",S="images/00yellow_slab.png",R="images/01rainbow_rock.png",_="images/02rock_of_light.png",O="images/00merchant_tent.png",B="images/01department_store.png",C="images/02skyscraper.png",I="images/00water_wheel.png",A="images/01windmill.png",T="images/02tesla_tower.png",P="images/03nuclear.png",E="images/04nuclear.png",V="images/01hot_air_balloon.png",F="images/02toy_helicopter.png",M="images/03airplane.png",j="images/04jet.png",G="images/00shack.png",H="images/01butcher.png",L="images/02house.png",N="images/01defensive_missile.png",Y="images/02attack_missile.png",W="images/03mind_control.png";function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var t=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(t.push(o.value),!n||t.length!==n);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return t}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var U=void 0,z=void 0,J=!1,$=new Image;$.src=i("images/grass_mix_d.jpg");var q=new Image;q.src=i("images/cursor.png");var K=function(){for(var e={},n=0;n<4;n++){e[n]={};for(var t=0;t<7;t++)e[n][t]={isPresent:!1,cORp:"",klass:"",level:null,name:""}}return e}();var Q={community:{fountains:[{file:i(p),name:"Dual Fountain",boost:10,cORp:"community",klass:"fountains",index:0}],meditations:[{file:i(g),name:"Ruins Meditate",boost:10,cORp:"community",klass:"meditations",index:0},{file:i(f),name:"Enlightened Meditate",boost:20,cORp:"community",klass:"meditations",index:1},{file:i(h),name:"Activated Meditate",boost:30,cORp:"community",klass:"meditations",index:2}],pyramids:[{file:i(v),name:"Red Pyramid",boost:10,cORp:"community",klass:"pyramids",index:0},{file:i(y),name:"Golden Pyramid",boost:20,cORp:"community",klass:"pyramids",index:1},{file:i(b),name:"Pyramid of Light",boost:30,cORp:"community",klass:"pyramids",index:2}],ruins:[{file:i(S),name:"Yellow Slab",boost:10,cORp:"community",klass:"ruins",index:0},{file:i(R),name:"Rainbow Rock",boost:20,cORp:"community",klass:"ruins",index:1},{file:i(_),name:"Stone of Light",boost:30,cORp:"community",klass:"ruins",index:2}],trees:[{file:i(k),name:"Small Tree",boost:10,cORp:"community",klass:"trees",index:0},{file:i(x),name:"Mighty Tree",boost:20,cORp:"community",klass:"trees",index:1},{file:i(w),name:"Tree of Light",boost:30,cORp:"community",klass:"trees",index:2}]},production:{farms:[],business:[{file:i(O),name:"Fruit Stand",boost:15,cORp:"production",klass:"business",index:0},{file:i(B),name:"Mall",boost:25,cORp:"production",klass:"business",index:1},{file:i(C),name:"Skyscraper",boost:90,cORp:"production",klass:"business",index:2}],energy:[{file:i(I),name:"Water Wheel",boost:15,cORp:"production",klass:"energy",index:0},{file:i(A),name:"Wind Mill",boost:25,cORp:"production",klass:"energy",index:1},{file:i(T),name:"Tesla Tower",boost:35,cORp:"production",klass:"energy",index:2},{file:i(P),name:"Nuclear",boost:45,cORp:"production",klass:"energy",index:3},{file:i(E),name:"Efficient Nuclear",boost:55,cORp:"production",klass:"energy",index:4}],flight:[{file:i(V),name:"Hot Air Balloon",boost:15,cORp:"production",klass:"flight",index:0},{file:i(F),name:"Helicopter",boost:25,cORp:"production",klass:"flight",index:1},{file:i(M),name:"Airplane",boost:35,cORp:"production",klass:"flight",index:2},{file:i(j),name:"Jet",boost:45,cORp:"production",klass:"flight",index:3}],houses:[{file:i(G),name:"Cold House",boost:15,cORp:"production",klass:"houses",index:0},{file:i(H),name:"Farm House",boost:25,cORp:"production",klass:"houses",index:1},{file:i(L),name:"Warm House",boost:35,cORp:"production",klass:"houses",index:2}],weapons:[{file:i(N),name:"Defense Missle",boost:15,cORp:"production",klass:"weapons",index:0},{file:i(Y),name:"Attack Missle",boost:25,cORp:"production",klass:"weapons",index:1},{file:i(W),name:"Mind Control",boost:35,cORp:"production",klass:"weapons",index:2}]}},Z=function(e,n){var t=document.getElementsByClassName("drop-down-container")[0],i=document.getElementsByClassName("civilization-menu")[0],a=Array.from(document.getElementsByClassName("cat")),r=(Array.from(i),document.getElementsByClassName("playerAlert")[0]),o=document.getElementsByClassName("playerAlert2")[0];e.addEventListener("mousedown",(function(e){if((U=h(e))&&Array.from(t.classList).includes("hidden")){var a=U[0],s=U[1];t.classList.toggle("hidden");var c=i.options.length;if(i.setAttribute("size",c),ne()){l(r);var u=K[a][s];o.appendChild(f(g(u),!1))}else l(r),z=U,console.log("previous grid",z),re(q,n,a,s)}else if(U&&!Array.from(t.classList).includes("hidden"))if(ne()){l(r),l(o);var d=U[0],m=U[1];if(void 0!==z){var p=z[0],v=z[1];!1===K[p][v].isPresent&&re($,n,p,v,!0)}var y=K[d][m];o.appendChild(f(g(y),!1))}else{l(r),l(o);var b=U[0],k=U[1];if(void 0!==z){var x=z[0],w=z[1];!1===K[x][w].isPresent&&re($,n,x,w,!0)}z=U,re(q,n,b,k),console.log("CORRECT")}else if(void 0===U&&!Array.from(t.classList).includes("hidden")){if(l(r),l(o),void 0!==z){var S=z[0],R=z[1];!1===K[S][R].isPresent&&re($,n,S,R,!0)}z=void 0,t.classList.toggle("hidden")}console.log("currentGrid: ".concat(U)),console.log("previousGrid: ".concat(z))})),/Android|webOS|iPhone|iPod|Blackberry|Windows Phone/i.test(navigator.userAgent)&&(J=!0),i.addEventListener("click",(function(e){if(l(r),l(o),void 0!==z&&z[0]===U[0]&&z[1]===U[1]&&ne()){var t=K[U[0]][U[1]];o.appendChild(f(g(t),!1))}if(0===o.childElementCount&&ne()){var m=K[U[0]][U[1]];o.appendChild(f(g(m),!1))}if(a.includes(e.target))return r.appendChild(f("That is not a building")),!1;if(console.log("resources",u.resources),u.resources<20)return r.appendChild(f("Every building costs 20 resources ... !")),!1;var p=i.options[i.selectedIndex].value;if(!p.includes(","))return r.appendChild(f("That is not a building")),!1;if(!s(p,i))return console.log("choiceStr",p),console.log("can't draw"),i.disabled=!1,J&&(r.appendChild(f("On Mobile")),i.selectedIndex=null),!1;var h=ee(p),v=h.file;if(ne()){if(ne()){var y=U[0],b=U[1],k=K[y][b];if(h.index===k.level+1){console.log("DRAW!!!"),re($,n,y,b,!0),ae(n,v,U);var x=te(h);0===o.childElementCount||l(o),o.appendChild(f(g(x),!1)),console.log("PAY UP"),d(-20),u[h.cORp]+=h.boost}}}else if(!0===ie(h)){ae(n,v,U);var w=te(h);o.appendChild(f(g(w),!1)),console.log("PAY UP"),d(-20),u[h.cORp]+=h.boost,function(e,n){var t,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"community";switch(!0){case e<=142:t=10;break;case e>142&&e<=184:t=20;break;case e>184&&e<=226:t=30;break;case e>226&&e<=268:t=40;break;case e>268&&e<=310:t=50;break;case e>310&&e<=352:t=60;break;case e>352&&e<=394:t=70;break;case e>394&&e<=436:t=80;break;case e>436&&e<=478:t=90;break;case e>700:t=100}if("community"===i)new c(n,-31,105,"green","v",t);else new c(n,612,105,"blue","v",t)}(u[h.cORp],n,h.cORp)}else r.appendChild(f("That building is not the first of it's kind!"));console.log("GO FALSE!"),i.disabled=!1,J&&(r.appendChild(f("On Mobile")),i.selectedIndex=null),console.log("playerpoints",u)}));var s=function(e,n){var t=U[0],i=U[1];if(n.disabled=!0,!0===K[t][i].isPresent){var a,o,s,l=e.split(","),c=X(l,3);a=c[0],o=c[1],c[2],s=parseInt(l[2]);var u=K[t][i],d=Q[a][o].length-1;if(u.cORp!==a||u.klass!==o)return r.appendChild(f("Building types must match!")),!1;if(o===u.klass&&s===u.level&&d!=s)return r.appendChild(f("That building is already there. Try upgrading!")),!1;if(o===u.klass){if(d===u.level)return s<d?(r.appendChild(f("Go forth & build! The aliens are coming!")),!1):(r.appendChild(f("Max upgrade achieved!")),!1);if(s<u.level)return r.appendChild(f("Try upgrading, we must not regret our past decisions")),!1;if(u.level+1!==s)return r.appendChild(f("Upgrade one level at a time!")),!1}}return!0},l=function(e){e.childElementCount>0&&e.removeChild(e.childNodes[0])},m={0:"A",1:"B",2:"C",3:"D"},p={0:"1",1:"2",2:"3",3:"4",4:"5",5:"6",6:"7"},g=function(e){var n=m[U[0]],t=p[U[1]];return"Current Selection: ".concat(e.name," ; @ [").concat(n,",").concat(t,"].")},f=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=document.createElement("span");if(n){var i=document.createTextNode(e);return t.appendChild(i),t.setAttribute("class","playerAlert"),t}var a=document.createElement("p"),r=e.split(";"),o=document.createTextNode(r[0]),s=document.createTextNode(r[1]);return t.appendChild(o),a.appendChild(s),t.setAttribute("class","playerAlert2"),a.setAttribute("class","red"),t.appendChild(a),t},h=function(n){var t,i,a=e.getBoundingClientRect(),r=n.pageX,o=n.pageY;console.log("-------"),console.log("px",r),console.log("py",o),t=r-a.left,i=o-a.top,console.log(a),console.log("-------"),console.log("cx",t),console.log("cy",i);var s=Math.floor((t-49)/86),l=Math.floor((i-138)/86);return console.log("X: [".concat(l,", Y: ").concat(s,"]")),l>=0&&l<=3&&s>=0&&s<=6?[l,s]:void 0}},ee=function(e){var n,t,i,a=X(e.split(","),3);return n=a[0],t=a[1],i=a[2],console.log("--"),Q[n][t][i]},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U[1];return K[e][n].isPresent},te=function(e){var n=U[0],t=U[1];return K[n][t].isPresent=!0,K[n][t].cORp=e.cORp,K[n][t].klass=e.klass,K[n][t].level=e.index,K[n][t].name=e.name,K[n][t]},ie=function(e){return 0===e.index},ae=function(e,n,t){var i=new Image;i.src=n;var a=t[0],r=t[1];re($,e,a,r,!0),i.onload=function(){re(i,e,a,r)}},re=function(e,n,t,i,a){console.log("draw on grid",t,i);0===t&&0===i?a?(n.clearRect(44,131,86,86),n.drawImage(e,44,131,86,86)):n.drawImage(e,44,131,86,86):0===t&&i>0?a?(n.clearRect(86*i+44,86*t+131,86,86),n.drawImage(e,86*i+44,86*t+131,86,86)):n.drawImage(e,86*i+44,131,86,86):a?(n.clearRect(86*i+44,86*t+131,86,86),n.drawImage(e,86*i+44,86*t+131,86,86)):n.drawImage(e,86*i+44,86*t+131,86,86)};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas-home"),n=e.getContext("2d");Z(e,n),function(e){var n=new Image;n.src=i("images/grass_mix_d.jpg"),n.onload=function(){t(e,n,44,131),t(e,n,44,217),t(e,n,44,303),t(e,n,44,389)};var t=function(e,n,t,i){for(var a=0;a<7;a++)e.drawImage(n,t,i,86,86),t+=86}}(n);new c(n,-31,115,"blank","v"),new c(n,612,115,"blank","v");!function(e){var n=e.canvas.width/2;e.font="bold 30px Sans-Serif",e.fillStyle="#66A1E7",e.strokeStyle="#55906F",e.fillText("|",n,10),e.strokeText("|",n,10)}(n),function(e){var n=["A","B","C","D"],t=[1,2,3,4,5,6,7],i=177,a=83;e.font="bold 13px Sans-Serif",e.fillStyle="#FFF",e.strokeStyle="#FFF";for(var r=0;r<n.length;r++)e.fillText(n[r],32,i),i+=86;for(var o=0;o<t.length;o++)e.fillText(t[o],a,489),a+=86}(n);var t=setInterval((function(){var e;e=-1,u.alienTimer+=e,function(e){var n=e.canvas.width/2,t=e.canvas.width/2-116;e.clearRect(t,0,275,80),e.font="bold 30px Sans-Serif",e.fillStyle="#000",e.strokeStyle="#FFF",e.fillText("Aliens are coming!",t,30),e.strokeText("Aliens are coming!",t,30),e.fillText(u.alienTimer,n-10,60),e.strokeText(u.alienTimer,n-10,60)}(n),0===u.alienTimer&&(function(e){var n=e.canvas.width/2-116;e.clearRect(n,0,275,80)}(n),clearInterval(t),function(e){var n=new s(e);n.makeShips();var t=setInterval(n.army[0].lToRAnimate,150),i=setInterval(n.army[1].lToRAnimate,150),a=setInterval(n.army[2].lToRAnimate,150);setTimeout((function(){return clearInterval(t)}),2100),setTimeout((function(){return clearInterval(i)}),2100),setTimeout((function(){return clearInterval(a)}),2100)}(n))}),1e3);setInterval((function(){u.resources+=5,m(n)}),600);setInterval((function(){m(n)}),250)}))}]);
//# sourceMappingURL=main.js.map