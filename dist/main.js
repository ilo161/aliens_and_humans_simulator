!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var i=function(e){return"./dist/".concat(e)};function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t,n,i,r,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.xStart=i,this.yStart=r,this.sprite=void 0,this.scaleW=a,this.scaleH=o,this.filePath=n,this.movements=[],this.moveIdx=0,this.loadAlienShip=this.loadAlienShip.bind(this),this.lToRAnimate=this.lToRAnimate.bind(this),this.drawShip=this.drawShip.bind(this),this.loadAlienShip(),this.moveSpanX()}var t,n,i;return t=e,(n=[{key:"moveSpanX",value:function(){for(var e=1;e<23;e++)this.movements.push({x:this.xStart*(40*e),y:this.yStart})}},{key:"loadAlienShip",value:function(){var e=this.filePath;this.sprite=new Image,this.sprite.src=e}},{key:"drawShip",value:function(){this.context.drawImage(this.sprite,this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.scaleW,this.scaleH)}},{key:"lToRAnimate",value:function(){this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.moveIdx,this.context.drawImage(this.sprite,this.movements[this.moveIdx].x,this.movements[this.moveIdx].y,this.scaleW,this.scaleH),this.moveIdx++,this.moveIdx>=this.movements.length&&(this.moveIdx=0)}}])&&r(t.prototype,n),i&&r(t,i),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.army=[]}var t,n,r;return t=e,(n=[{key:"makeShips",value:function(){for(var e=this.army.length,t=[i("images/08-Netuno.png"),i("images/06-Saturno.png"),i("images/09-Pluto.png")];this.army.length<3;){var n=void 0;n=0===(e=this.army.length)?e:40*e;var r=t[e],o=new a(this.context,r,1,n,40,40);this.army.push(o)}}}])&&o(t.prototype,n),r&&o(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t,n,i,r,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t,this.startX=n,this.startY=i,this.points=30,this.color=r,this.value=o,this.orientation=a,this.blankSprite=void 0,this.colorSprite=void 0,this.loadSrc(a)}var t,n,r;return t=e,(n=[{key:"loadSrc",value:function(e){if("blank"===this.color){var t=this.orientationAndCreate(e);this.blankSprite=new Image,this.blankSprite.src=t;var n=this;this.blankSprite.onload=function(e){n.context.drawImage(n.blankSprite,n.startX,n.startY,100,378)}}else{var i=this.selectColor(this.color,e,this.value);this.colorSprite=new Image,this.colorSprite.src=i;var r=this;this.colorSprite.onload=function(e){r.context.drawImage(r.colorSprite,r.startX,r.startY,100,400)}}}},{key:"orientationAndCreate",value:function(e){return"h"===e||"H"===e?i("images/H_BarBackground.png"):"v"===e||"V"===e?i("images/V_BarBackground.png"):void 0}},{key:"selectColor",value:function(e,t,n){var r={blank:i("images/H_BarBackground.png"),blue:i("images/H_BlueBar.png"),green:i("images/H_GreenBar.png"),red:i("images/H_RedBar.png"),yellow:i("images/H_YellowBar.png")},a={blank:i("images/V_BarBackground.png"),blue:{10:i("images/V_BlueBar10.png"),20:i("images/V_BlueBar20.png"),30:i("images/V_BlueBar30.png"),40:i("images/V_BlueBar40.png"),50:i("images/V_BlueBar50.png"),60:i("images/V_BlueBar60.png"),70:i("images/V_BlueBar70.png"),80:i("images/V_BlueBar80.png"),90:i("images/V_BlueBar90.png"),100:i("images/V_BlueBar100.png")},green:{10:i("images/V_GreenBar10.png"),20:i("images/V_GreenBar20.png"),30:i("images/V_GreenBar30.png"),40:i("images/V_GreenBar40.png"),50:i("images/V_GreenBar50.png"),60:i("images/V_GreenBar60.png"),70:i("images/V_GreenBar70.png"),80:i("images/V_GreenBar80.png"),90:i("images/V_GreenBar90.png"),100:i("images/V_GreenBar100.png")}};return"h"===t||"H"===t?r[e]:"v"===t||"V"===t?a[e][n]:void 0}},{key:"increaseFill",value:function(e){this.value=e;var t=this.selectColor(this.color,this.orientation,this.value);this.colorSprite.src=t;var n=this;this.colorSprite.onload=function(e){n.context.drawImage(n.colorSprite,n.startX,n.startY,100,400)}}},{key:"decreaseFill",value:function(e){}},{key:"resetFill",value:function(){}},{key:"drawBar",value:function(e){e.drawImage(this.blankSprite,this.startX,this.startY,100,100)}}])&&l(t.prototype,n),r&&l(t,r),e}(),u={community:0,production:0,resources:0,alienTimer:2},m=function(e){u.resources+=e},d=function(e){var t=e.canvas.width/2-108;e.clearRect(t,478,t+350,30),e.font="bold 30px Sans-Serif",e.fillStyle="#000",e.strokeStyle="#C5E0CF",e.fillText("Resources: "+u.resources,t,500),e.strokeText("Resources: "+u.resources,t,500)},g="images/00fountain.png",p="images/00plain_meditation.png",f="images/01activated_meditation.png",h="images/02light_meditation.png",v="images/00red_pyramid.png",y="images/01golden_pyramid.png",b="images/02light_pyramid.png",k="images/00small_tree.png",x="images/01mighty_tree.png",w="images/02tree_of_light.png",S="images/00yellow_slab.png",_="images/01rainbow_rock.png",B="images/02rock_of_light.png",R="images/00water_wheel.png",I="images/01windmill.png",O="images/02tesla_tower.png",T="images/03nuclear.png",A="images/04nuclear.png",C="images/00shack.png",V="images/01butcher.png",P="images/02house.png";function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var G=void 0,H=new Image;H.src=i("images/grass_mix_d.jpg");var M=function(){for(var e={},t=0;t<4;t++){e[t]={};for(var n=0;n<7;n++)e[t][n]={isPresent:!1,cORp:"",klass:"",level:null}}return e}();var L={community:{fountains:[{file:i(g),name:"Dual Fountain",boost:10,cORp:"community",klass:"fountains",index:0}],meditations:[{file:i(p),name:"Ruins Meditate",boost:10,cORp:"community",klass:"meditations",index:0},{file:i(f),name:"Enlightened Meditate",boost:20,cORp:"community",klass:"meditations",index:1},{file:i(h),name:"Activated Meditate",boost:30,cORp:"community",klass:"meditations",index:2}],pyramids:[{file:i(v),name:"Red Pyramid",boost:10,cORp:"community",klass:"pyramids",index:0},{file:i(y),name:"Golden Pyramid",boost:20,cORp:"community",klass:"pyramids",index:1},{file:i(b),name:"Pyramid of Light",boost:30,cORp:"community",klass:"pyramids",index:2}],ruins:[{file:i(S),name:"Yellow Slab",boost:10,cORp:"community",klass:"ruins",index:0},{file:i(_),name:"Rainbow Rock",boost:20,cORp:"community",klass:"ruins",index:1},{file:i(B),name:"Stone of Light",boost:30,cORp:"community",klass:"ruins",index:2}],trees:[{file:i(k),name:"Small Tree",boost:10,cORp:"community",klass:"trees",index:0},{file:i(x),name:"Mighty Tree",boost:20,cORp:"community",klass:"trees",index:1},{file:i(w),name:"Tree of Light",boost:30,cORp:"community",klass:"trees",index:2}]},production:{farms:[],buildings:[],energy:[{file:i(R),name:"Water Wheel",boost:15,cORp:"production",klass:"energy",index:0},{file:i(I),name:"Wind Mill",boost:25,cORp:"production",klass:"energy",index:1},{file:i(O),name:"Tesla Tower",boost:35,cORp:"production",klass:"energy",index:2},{file:i(T),name:"Nuclear",boost:45,cORp:"production",klass:"energy",index:3},{file:i(A),name:"Efficient Nuclear",boost:55,cORp:"production",klass:"energy",index:4}],houses:[{file:i(C),name:"Cold House",boost:15,cORp:"production",klass:"houses",index:0},{file:i(V),name:"Farm House",boost:25,cORp:"production",klass:"houses",index:1},{file:i(P),name:"Warm House",boost:35,cORp:"production",klass:"houses",index:2}]}},F=function(e,t){var n=document.getElementsByClassName("drop-down-container")[0],i=document.getElementsByClassName("civilization-menu")[0],r=Array.from(document.getElementsByClassName("cat")),a=(Array.from(i),document.getElementsByClassName("playerAlert")[0]);e.addEventListener("mousedown",(function(e){if((G=d(e))&&Array.from(n.classList).includes("hidden")){n.classList.toggle("hidden");var t=i.options.length;i.setAttribute("size",t)}else void 0!==G||Array.from(n.classList).includes("hidden")||n.classList.toggle("hidden");console.log("currentGrid: ".concat(G))})),i.addEventListener("click",(function(e){if(s(),r.includes(e.target))return a.appendChild(l("That is not a building")),!1;if(console.log("resources",u.resources),u.resources<20)return a.appendChild(l("Every building costs 20 resources ... !")),!1;var n=i.options[i.selectedIndex].value;if(!n.includes(","))return a.appendChild(l("That is not a building")),!1;if(!o(n,i))return console.log("can't draw"),i.disabled=!1,!1;var d=Y(n),g=d.file;if(N()){if(N()){var p=G[0],f=G[1],h=M[p][f];d.index===h.level+1&&(console.log("DRAW!!!"),D(H,t,p,f,!0),U(t,g,G),X(d),console.log("PAY UP"),m(-20),u[d.cORp]+=d.boost)}}else!0===W(d)?(U(t,g,G),X(d),console.log("PAY UP"),m(-20),u[d.cORp]+=d.boost,function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"community";switch(!0){case e<=142:n=10;break;case e>142&&e<=184:n=20;break;case e>184&&e<=226:n=30;break;case e>226&&e<=268:n=40;break;case e>268&&e<=310:n=50;break;case e>310&&e<=352:n=60;break;case e>352&&e<=394:n=70;break;case e>394&&e<=436:n=80;break;case e>436&&e<=478:n=90;break;case e>700:n=100}if("community"===i)new c(t,-34,105,"green","v",n);else new c(t,590,105,"blue","v",n)}(u[d.cORp],t,d.cORp)):a.appendChild(l("That building is not the first of it's kind!"));console.log("GO FALSE!"),i.disabled=!1,console.log("playerpoints",u)}));var o=function(e,t){var n=G[0],i=G[1];if(t.disabled=!0,!0===M[n][i].isPresent){var r,o,s,c=e.split(","),u=E(c,3);r=u[0],o=u[1],u[2],s=parseInt(c[2]);var m=M[n][i],d=L[r][o].length-1;if(m.cORp!==r||m.klass!==o)return a.appendChild(l("Building types must match!")),!1;if(o===m.klass&&s===m.level&&d!=s)return a.appendChild(l("That building is already there. Try upgrading!")),!1;if(o===m.klass){if(d===m.level)return a.appendChild(l("Max upgrade achieved!")),!1;if(s<m.level)return a.appendChild(l("Try upgrading, we must not regret our past decisions")),!1;if(m.level+1!==s)return a.appendChild(l("Upgrade one level at a time!")),!1}}return!0},s=function(){a.childElementCount>0&&a.removeChild(a.childNodes[0])},l=function(e){var t=document.createElement("p"),n=document.createTextNode(e);return t.appendChild(n),t.setAttribute("class","playerAlert"),t},d=function(t){var n,i,r=e.getBoundingClientRect(),a=t.pageX,o=t.pageY;n=a-r.left,i=o-r.top,console.log(r),console.log("-------"),console.log(n),console.log(i);var s=Math.floor((n-22)/86),l=Math.floor((i-131)/86);return console.log("X: [".concat(l,", Y: ").concat(s,"]")),l>=0&&l<=3&&s>=0&&s<=6?[l,s]:void 0}},Y=function(e){var t,n,i,r=E(e.split(","),3);return t=r[0],n=r[1],i=r[2],console.log("--"),L[t][n][i]},N=function(){var e=G[0],t=G[1];return M[e][t].isPresent},X=function(e){var t=G[0],n=G[1];return M[t][n].isPresent=!0,M[t][n].cORp=e.cORp,M[t][n].klass=e.klass,M[t][n].level=e.index,M[t][n]},W=function(e){return 0===e.index},U=function(e,t,n){var i=new Image;i.src=t;var r=n[0],a=n[1];i.onload=function(){D(i,e,r,a)}},D=function(e,t,n,i,r){console.log("draw on grid",n,i);0===n&&0===i?r?(t.clearRect(22,131,86,86),t.drawImage(e,22,131,86,86)):t.drawImage(e,22,131,86,86):0===n&&i>0?r?(t.clearRect(86*i+22,86*n+131,86,86),t.drawImage(e,86*i+22,86*n+131,86,86)):t.drawImage(e,86*i+22,131,86,86):r?(t.clearRect(86*i+22,86*n+131,86,86),t.drawImage(e,86*i+22,86*n+131,86,86)):t.drawImage(e,86*i+22,86*n+131,86,86)};document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas-home"),t=e.getContext("2d");F(e,t),function(e){var t=new Image;t.src=i("images/grass_mix_d.jpg"),t.onload=function(){n(e,t,22,131),n(e,t,22,217),n(e,t,22,303),n(e,t,22,389)};var n=function(e,t,n,i){for(var r=0;r<7;r++)e.drawImage(t,n,i,86,86),n+=86}}(t);new c(t,-34,115,"blank","v"),new c(t,590,115,"blank","v");!function(e){var t=e.canvas.width/2;e.font="bold 30px Sans-Serif",e.fillStyle="#66A1E7",e.strokeStyle="#55906F",e.fillText("|",t,10),e.strokeText("|",t,10)}(t);var n=setInterval((function(){var e;e=-1,u.alienTimer+=e,function(e){var t=e.canvas.width/2,n=e.canvas.width/2-116;e.clearRect(n,0,275,80),e.font="bold 30px Sans-Serif",e.fillStyle="#000",e.strokeStyle="#FFF",e.fillText("Aliens are coming!",n,30),e.strokeText("Aliens are coming!",n,30),e.fillText(u.alienTimer,t-10,60),e.strokeText(u.alienTimer,t-10,60)}(t),0===u.alienTimer&&(function(e){var t=e.canvas.width/2-116;e.clearRect(t,0,275,80)}(t),clearInterval(n),function(e){var t=new s(e);t.makeShips();var n=setInterval(t.army[0].lToRAnimate,150),i=setInterval(t.army[1].lToRAnimate,150),r=setInterval(t.army[2].lToRAnimate,150);setTimeout((function(){return clearInterval(n)}),2100),setTimeout((function(){return clearInterval(i)}),2100),setTimeout((function(){return clearInterval(r)}),2100)}(t))}),1e3);setInterval((function(){u.resources+=5,d(t)}),600);setInterval((function(){d(t)}),250)}))}]);
//# sourceMappingURL=main.js.map